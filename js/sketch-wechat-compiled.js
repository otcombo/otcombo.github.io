p5.disableFriendlyErrors=!0;var play_it=1,first_time=1,particle_amount,speed,gap,limit,init_x,init_y,speeds=Array(particle_amount),x=Array(particle_amount),y=Array(particle_amount),dis_x=Array(particle_amount),dis_y=Array(particle_amount);
function setup(){var a=select("#sketch");a=createCanvas(a.width,a.height);a.parent("sketch");a.mouseOver(checkState);a.mouseOut(checkState);800>width?(particle_amount=5E3,speed=gap=30,limit=width):(particle_amount=1E4,gap=40,speed=30,limit=.6*width);init_x=random(width);init_y=random(height);setParticles();frameRate(60);noFill()}
function draw(){background("#2C7631");if(0!=mouseX||0!=mouseY)first_time=0;for(var a=0;a<particle_amount;a++){var b=dist(mouseX,mouseY,x[a],y[a]);first_time&&(b=dist(init_x,init_y,x[a],y[a]));b>limit&&(x[a]=mouseX+limit*randomGaussian());b=Math.sin(b/gap)/b;dis_x[a]=.5*dis_y[a]+b*(x[a]-mouseX)*speeds[a];dis_y[a]=.7*dis_y[a]+b*(y[a]-mouseY)*speeds[a]}for(a=0;a<particle_amount;a++)x[a]+=dis_x[a],0>x[a]&&(x[a]=width),x[a]>width&&(x[a]=0),0>y[a]&&(y[a]=height),y[a]>height&&(y[a]=0),0>speeds[a]?(stroke(128,
153,94),y[a]+=dis_y[a]):stroke(181,176,126),point(x[a],y[a])}function setParticles(){for(var a=0;a<particle_amount;a++)speeds[a]=randomGaussian()*speed,x[a]=random(width),y[a]=random(height),dis_x[a]=x[a]+speeds[a],dis_y[a]=y[a]+speeds[a]}function checkState(){play_it?(loop(),play_it=0):(noLoop(),play_it=1)};
